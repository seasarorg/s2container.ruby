<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>2.8.&nbsp;Interceptor Block</title>
<link href="../../theme/docbook.css" rel="stylesheet" type="text/css">
<meta content="DocBook XSL Stylesheets V1.74.0" name="generator">
<link rel="home" href="index.html" title="S2Container.Ruby Document">
<link rel="up" href="quickstart.html" title="Chapter&nbsp;2.&nbsp;Quick Start">
<link rel="prev" href="quick207.html" title="2.7.&nbsp;Auto Aspect">
<link rel="next" href="dicon.html" title="Chapter&nbsp;3.&nbsp;S2Container.Ruby Reference">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<a href="../index.html"><img src="../../images/seasar_logo_blue.gif"></a>
<br>
<div class="navheader">
<table summary="Navigation header" width="100%">
<tr>
<th align="center" colspan="3">2.8.&nbsp;Interceptor Block</th>
</tr>
<tr>
<td align="left" width="20%"><a accesskey="p" href="quick207.html">Prev</a>&nbsp;</td><th align="center" width="60%">Chapter&nbsp;2.&nbsp;Quick Start</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="dicon.html">Next</a></td>
</tr>
</table>
<hr>
</div>
<div class="sect1" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="quick208"></a>2.8.&nbsp;Interceptor Block</h2>
</div>
</div>
</div>
    
<p>
    When a block is passed to the <a class="link" href="dicon.application.html#dicon.application.autoaspect" title="3.2.5.&nbsp;Auto Aspect">s2aspect method</a>, the block is treated as Interceptor.
    The argument to the block is MethodInvocation instance.
    By calling the proceed method of MethodInvocation class, following Interceptor or 
    the method for Aspect is executed. 
    </p>

<pre class="programlisting">
require 's2container'

class Action
  s2comp
  def index
    s2logger.debug(self){"Action::index called."}
    return 100
  end
end

s2aspect(:pattern =&gt; Action) {|invocation|
  invocation.proceed * 1.05
}

p s2app[Action].index  # -&gt; 105.0
</pre>

    
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<table border="0" summary="Note: NOTE">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="../../images/docbook/note.png"></td><th align="left">NOTE</th>
</tr>
<tr>
<td valign="top" align="left">
      
<p>
        This Example is located at "examples/quickstart/quickstart7".
      </p>
    
</td>
</tr>
</table>
</div>
  
</div>
<div class="navfooter">
<hr>
<table summary="Navigation footer" width="100%">
<tr>
<td align="left" width="40%"><a accesskey="p" href="quick207.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a accesskey="u" href="quickstart.html">Up</a></td><td align="right" width="40%">&nbsp;<a accesskey="n" href="dicon.html">Next</a></td>
</tr>
<tr>
<td valign="top" align="left" width="40%">2.7.&nbsp;Auto Aspect&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;Chapter&nbsp;3.&nbsp;S2Container.Ruby Reference</td>
</tr>
</table>
</div>
<br>
<br>
<table width="100%">
<tr>
<td align="center"><font size="-2">
    &copy; Copyright The Seasar Foundation and the others 2008-2009, all rights reserved.
    </font></td>
</tr>
</table>
</body>
</html>
